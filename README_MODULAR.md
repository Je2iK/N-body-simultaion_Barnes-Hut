# N-Body Simulation - Modular Version

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–ú–æ–¥—É–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è N-body —Å–∏–º—É–ª—è—Ü–∏–∏ —Å –¥–≤—É–º—è –∞–ª–≥–æ—Ä–∏—Ç–º–∞–º–∏:
- **Barnes-Hut** - O(N log N) —Å–ª–æ–∂–Ω–æ—Å—Ç—å, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç quadtree
- **Brute Force** - O(N¬≤) —Å–ª–æ–∂–Ω–æ—Å—Ç—å, –ø—Ä—è–º–æ–µ —Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
N-body-simultaion_Barnes-Hut/
‚îú‚îÄ‚îÄ include/              # –ó–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ Star.h           # –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–≤–µ–∑–¥—ã
‚îÇ   ‚îú‚îÄ‚îÄ Constants.h      # –§–∏–∑–∏—á–µ—Å–∫–∏–µ –∏ –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ Utils.h          # –£—Ç–∏–ª–∏—Ç—ã (—Å–æ–∑–¥–∞–Ω–∏–µ –≥–∞–ª–∞–∫—Ç–∏–∫–∏, –æ—Ç—Ä–∏—Å–æ–≤–∫–∞)
‚îÇ   ‚îú‚îÄ‚îÄ Cell.h           # –ö–ª–µ—Ç–∫–∞ quadtree (–¥–ª—è Barnes-Hut)
‚îÇ   ‚îú‚îÄ‚îÄ ISimulator.h     # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å–∏–º—É–ª—è—Ç–æ—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ BarnesHutSimulator.h    # Barnes-Hut –∞–ª–≥–æ—Ä–∏—Ç–º
‚îÇ   ‚îú‚îÄ‚îÄ BruteForceSimulator.h   # Brute Force –∞–ª–≥–æ—Ä–∏—Ç–º
‚îÇ   ‚îî‚îÄ‚îÄ Benchmark.h      # –°–∏—Å—Ç–µ–º–∞ –±–µ–Ω—á–º–∞—Ä–∫–∏–Ω–≥–∞
‚îú‚îÄ‚îÄ src/                 # –ò—Å—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ main.cpp         # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª —Å –º–µ–Ω—é
‚îÇ   ‚îú‚îÄ‚îÄ Utils.cpp
‚îÇ   ‚îú‚îÄ‚îÄ Cell.cpp
‚îÇ   ‚îú‚îÄ‚îÄ BarnesHutSimulator.cpp
‚îÇ   ‚îú‚îÄ‚îÄ BruteForceSimulator.cpp
‚îÇ   ‚îî‚îÄ‚îÄ Benchmark.cpp
‚îú‚îÄ‚îÄ Makefile_new         # Makefile –¥–ª—è —Å–±–æ—Ä–∫–∏
‚îî‚îÄ‚îÄ CMakeLists_new.txt   # CMake –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```

## üöÄ –°–±–æ—Ä–∫–∞

### –í–∞—Ä–∏–∞–Ω—Ç 1: Makefile
```bash
make -f Makefile_new
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: CMake
```bash
mkdir build && cd build
cmake -f ../CMakeLists_new.txt ..
make
```

## üéÆ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—É:
```bash
./bin/nbody_simulation
```

### –ú–µ–Ω—é –ø—Ä–æ–≥—Ä–∞–º–º—ã:

1. **Run Barnes-Hut simulation** - –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å Barnes-Hut
2. **Run Brute Force simulation** - –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å Brute Force
3. **Benchmark Barnes-Hut only** - –¢–æ–ª—å–∫–æ –±–µ–Ω—á–º–∞—Ä–∫ Barnes-Hut
4. **Benchmark Brute Force only** - –¢–æ–ª—å–∫–æ –±–µ–Ω—á–º–∞—Ä–∫ Brute Force
5. **Compare both algorithms** - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –æ–±–æ–∏—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏:
- `SPACE` - –ü–∞—É–∑–∞/–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å
- `T` - –ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å –¥–µ—Ä–µ–≤–æ (—Ç–æ–ª—å–∫–æ Barnes-Hut)
- `ESC` - –í—ã—Ö–æ–¥

## üìä –ë–µ–Ω—á–º–∞—Ä–∫–∏

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ñ–∞–π–ª—ã:
- `benchmark_barnes_hut.txt` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã Barnes-Hut
- `benchmark_brute_force.txt` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã Brute Force
- `benchmark_comparison.txt` - —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤

### –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è:
```
========================================
  Benchmark Results: Barnes-Hut
========================================
Algorithm:           Barnes-Hut
Complexity:          O(N log N)
Particles:           5001
Threads:             8
Steps:               1000
Total duration:      15234 ms
Avg time per step:   15.234 ms
Equivalent FPS:      65.641
========================================

‚úÖ Barnes-Hut is 12.5x FASTER than Brute Force (N¬≤)
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ `include/Constants.h`:

```cpp
// –§–∏–∑–∏–∫–∞
const double G = 0.001;
const double EPSILON_SQ = 100.0;
const double BLACK_HOLE_MASS = 1000000.0;

// Barnes-Hut
const double THETA = 1.0;  // –¢–æ—á–Ω–æ—Å—Ç—å –∞–ø–ø—Ä–æ–∫—Å–∏–º–∞—Ü–∏–∏
const double DT = 4.3;     // –®–∞–≥ –≤—Ä–µ–º–µ–Ω–∏

// –°–∏–º—É–ª—è—Ü–∏—è
const int NUM_STARS_EXCEPT_BH = 5000;  // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–≤–µ–∑–¥
const int NUM_STEPS_BENCHMARK = 1000;  // –®–∞–≥–æ–≤ –≤ –±–µ–Ω—á–º–∞—Ä–∫–µ
```

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –º–æ–¥—É–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

1. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏** - –∫–∞–∂–¥—ã–π –∫–ª–∞—Å—Å –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–≤–æ—é –∑–∞–¥–∞—á—É
2. **–õ–µ–≥–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤** - –ø—Ä–æ—Å—Ç–æ —Ä–µ–∞–ª–∏–∑—É–π—Ç–µ `ISimulator`
3. **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞** - –æ–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ Utils, Constants
4. **–ü—Ä–æ—Å—Ç–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –∫–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ
5. **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤** - –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –±–µ–Ω—á–º–∞—Ä–∫–∏–Ω–≥–∞

## üìù –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∞–ª–≥–æ—Ä–∏—Ç–º–∞

1. –°–æ–∑–¥–∞–π—Ç–µ –∫–ª–∞—Å—Å, –Ω–∞—Å–ª–µ–¥—É—é—â–∏–π `ISimulator`
2. –†–µ–∞–ª–∏–∑—É–π—Ç–µ –º–µ—Ç–æ–¥—ã:
   - `timeStep()` - –æ–¥–∏–Ω —à–∞–≥ —Å–∏–º—É–ª—è—Ü–∏–∏
   - `getName()` - –Ω–∞–∑–≤–∞–Ω–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º–∞
   - `getComplexity()` - —Å–ª–æ–∂–Ω–æ—Å—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º–∞
3. –î–æ–±–∞–≤—å—Ç–µ –≤ –º–µ–Ω—é –≤ `main.cpp`

## üî¨ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

- **–ò–Ω—Ç–µ–≥—Ä–∞—Ç–æ—Ä**: Leapfrog (—Å–∏–º–ø–ª–µ–∫—Ç–∏—á–µ—Å–∫–∏–π)
- **–ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å**: –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç —É—Å–∫–æ—Ä–µ–Ω–∏–π
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**: Fast inverse square root, -O3, -march=native
- **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è**: SFML —Å VertexArray –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- C++17 –∏–ª–∏ –≤—ã—à–µ
- SFML 2.5+
- pthread
- CMake 3.10+ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
